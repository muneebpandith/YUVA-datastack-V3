{% extends "layouts/base-fullscreen.html" %}

{% block content%}
<body>
    
    
    <!-- Hero Section -->


    {% if alert_information %}
    <script>
        alert("{{alert_information}}");
    </script>
    {% endif %}
    <div class="hero-section heading-banner">
        <div class="row text-start" style="margin-bottom:50px;">
            <div class="col-12">
                <p style="font-family: Roboto;">
                    <a href="/index" style="color:white;" >Home </a> <i class="fa-solid fa-play" style="margin:5px;"></i> <b>My Dashboard</b>
                </p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12" >
                <div class="shadow filtercardsborder details__content-tabs">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active navitemsmain" id="tab-1-tab" data-bs-toggle="tab" data-bs-target="#tab-1" type="button" role="tab" aria-controls="tab-1" aria-selected="true">
                                Subscription and Requests
                            </button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link navitemsmain" id="tab-2-tab" data-bs-toggle="tab" data-bs-target="#tab-2" type="button" role="tab" aria-controls="tab-2" aria-selected="false" tabindex="-1">
                                Profile
                            </button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link navitemsmain" id="tab-3-tab" data-bs-toggle="tab" data-bs-target="#tab-3" type="button" role="tab" aria-controls="tab-3" aria-selected="false" tabindex="-1">
                                Datastacks
                            </button>
                        </li>
                        <!--
                        <li class="nav-item" role="presentation">
                            <button class="nav-link navitemsmain" id="tab-2-tab" data-bs-toggle="tab" data-bs-target="#tab-2" type="button" role="tab" aria-controls="tab-2" aria-selected="false" tabindex="-1">
                                Profile
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link navitemsmain" id="tab-2-tab" data-bs-toggle="tab" data-bs-target="#tab-2" type="button" role="tab" aria-controls="tab-2" aria-selected="false" tabindex="-1">
                                Change Password
                            </button>
                        </li> -->
                        

                    </ul>
    
                    <!-- Tab Content -->
                    <div class="tab-content p-3" id="myTabContent" style="background-color:#fff;">
                        <!-- Tab 1 Content -->
                        <div class="tab-pane fade show active" id="tab-1" role="tabpanel" aria-labelledby="tab-1-tab">
                            <div class="modal fade" id="modalViewRequest" tabindex="-1" aria-labelledby="modalViewRequestLabel" aria-hidden="true">
                                <div class="modal-dialog" style="max-width:80%;">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <h5 class="modal-title" id="exampleModalLabel">View Request</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body" style="text-align: left;">
                                        <form method="post" action="" class="" style="padding-left:20px; padding-right:20px;">
                                            {{approval_rejection_form.hidden_tag() }}
                                            <input type="hidden" id="req_request_id" name="req_request_id" />
                                            <div class="row" style="text-align: left;">
                                                <div class="col-12  p-1">
                                                    <label id="labelx" for="first_name" class="labelx">Requested Datastack Name</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-database"></span>
                                                        </span>
                                                        
                                                        <input class="form-control" id="req_datastack_name" name="req_datastack_name" type="text" disabled="">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <a href="" id="req_datastack_url" name="req_datastack_url" target="_blank"><span class="fa-solid fa-link"></span>&nbsp; Click to see datastack details </a>
                                                        </span>
                                                    </div>
                                                   </div>
                                            </div>
                                            <div class="row">   
                                                <div class="col-md-6 p-1">
                                                    <label id="labelx" for="last_name">Requesting user's First Name</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-user"></span>
                                                        </span>
                                                        <input class="form-control" id="req_first_name" name="req_first_name" type="text" disabled="">                                               
                                                    </div>
                                                      
                                                </div>
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="last_name">Requesting user's Last Name</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-user"></span>
                                                        </span>
                                                        <input class="form-control" id="req_last_name" name="req_last_name" type="text" disabled="">                                               
                                                    </div>
                                                   
                                                </div>
                                            </div>
                        
                                            <div class="row align-items-center">
                                                
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="name_of_organization">Name of Organization</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        <input class="form-control" id="req_name_of_organization" name="req_name_of_organization" type="text" disabled="">                                               
                                                    </div>
                                                   
                                                </div>
                                                
                        
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="type_of_organization">Type of Organization</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        <input class="form-control" id="req_type_of_organization" name="req_type_of_organization" type="text" disabled="">                                               
                                                    </div>
                                                    
                                                </div>
                                                
                                                
                                                
                                            </div>
                        
                                            <div class="row align-items-center">
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="email">Email address </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            <span class="fas fa-envelope"></span>
                                                        </span>
                                                        <input class="form-control" id="req_email" name="req_email" type="text" disabled="">                                               
                                                    </div>
                                                   
                                                </div>
                        
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="phone">Mobile Number</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            +91
                                                        </span>
                                                        <input class="form-control" id="req_phone" name="req_phone" type="text" disabled="">                                               
                                                    </div>
                                                    
                                                </div>
                                                
                                                
                                                
                                            </div>
                                            <div class="row">
                        
                        
                        
                                                <div class="col-md-6  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="authority_document">
                                                            Authority Letter from Department
                                                        </label>
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                <a id="req_authority_document" name="req_authority_document" target="_blank">Click to view <span class="fa-solid fa-file-pdf text-danger"></span></a>
                                                            </span>
                                                            
                                                        </div>
                                                       
                                                    </div>
                                                    
                        
                                                    
                                                </div>
                        
                                                <div class="col-md-6  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="identity_document">Identification Document</label>
                                                        <div class="input-group">
                                                            <span class="input-group-text bg-gray">
                                                                <a id="req_identity_document" name="req_identity_document"  target="_blank">Click to view <span class="fa-solid fa-file-pdf text-danger"></span></a>
                                                            </span>
                                                        </div>
                                                        <!--form.name_of_organization(placeholder="Name of Organization", class="input form-control", type="text")-->
                                                        <!-- <input class="form-control" id="name_of_organization" name="name_of_organization" type="text" placeholder="Name of organization" required=""> -->
                                                    </div>
                                                   
                                                   
                                                </div>
                                                
                                            </div>
                        
                                            <div class="row">
                                                <div class="col-12  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="purpose">Purpose</label>
                                                        <textarea class="input form-control" id="req_purpose" name="req_purpose" type="text" disabled></textarea>
                                                    </div>
                                                </div>
                                            </div>
                        
                                            <div class="row">
                                                <div class="col-12  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="remarks">REMARKS</label>
                                                        <textarea class="input form-control" id="req_remarks" name="req_remarks" placeholder="Enter remarks for approval or rejection" required="" type="text"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="modal-footer">
                                                <button type="submit" id="req_approved" name="req_approved" class="btn btn-success"> <span class="fas fa-check me-2"></span>Approve</button>
                                                <button type="submit" id="req_rejected" name="req_rejected" class="btn btn-danger"> <span class="fas fa-ban me-2"></span>Reject </button>
                                            </div>
                                        </form>
                                    </div>
                                    
                                  </div>
                                </div>
                            </div>
                            <div class="row">
                                
                                <div class="col-12" style="padding:20px;">
                                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4">
                                            <div class="d-block mb-4 mb-md-0">
                                                
                                            </div>
                                            <!-- <div class="btn-toolbar mb-2 mb-md-0">
                                                <a href="#" class="btn btn-sm btn-gray-800 d-inline-flex align-items-center">
                                                    <svg class="icon icon-xs me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                                                    New Plan
                                                </a>
                                                <div class="btn-group ms-2 ms-lg-3">
                                                    <button type="button" class="btn btn-sm btn-outline-gray-600">Share</button>
                                                    <button type="button" class="btn btn-sm btn-outline-gray-600">Export</button>
                                                </div>
                                            </div> -->
                                        </div>
                                        
                                        <div class="table-settings mb-4">
                                            <div class="row align-items-center justify-content-between">
                                                <!-- <div class="col col-md-6 col-lg-3 col-xl-4">
                                                    <div class="input-group me-2 me-lg-3 fmxw-400">
                                                        <span class="input-group-text">
                                                            <svg class="icon icon-xs" x-description="Heroicon name: solid/search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                                            </svg>
                                                        </span>
                                                        <input type="text" class="form-control" placeholder="Search orders">
                                                    </div>
                                                </div> -->
                                                <!-- <div class="col-4 col-md-2 col-xl-1 ps-md-0 text-end">
                                                    <div class="dropdown">
                                                        <button class="btn btn-link text-dark dropdown-toggle dropdown-toggle-split m-0 p-1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path></svg>
                                                            <span class="visually-hidden">Toggle Dropdown</span>
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-xs dropdown-menu-end pb-0" data-popper-placement="bottom-end" style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate3d(1132px, 497px, 0px);">
                                                            <span class="small ps-3 fw-bold text-dark">Show</span>
                                                            <a class="dropdown-item d-flex align-items-center fw-bold" href="#">10 <svg class="icon icon-xxs ms-auto" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></a>
                                                            <a class="dropdown-item fw-bold" href="#">20</a>
                                                            <a class="dropdown-item fw-bold rounded-bottom" href="#">30</a>
                                                        </div>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                        
                                        <div class="cardx card-body border-0 shadow table-wrapper table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th class="border-gray-200">Request ID</th>
                                                        <th class="border-gray-200">Datastack</th>						
                                                        <th class="border-gray-200">Requester</th>
                                                        <th class="border-gray-200">Department</th>
                                                        <th class="border-gray-200">Organization Type</th>
                                                        <th class="border-gray-200">Identity Proof</th>
                                                        <th class="border-gray-200">Authorization Proof</th>
                                                        <th class="border-gray-200">Current Status</th>
                                                        <th class="border-gray-200">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Item -->

                                                    {% for r,d,u in existing_requests %}
                                                    <tr>
                                                        <td>
                                                            <a href="#" class="fw-bold">
                                                                {{r.request_id}}
                                                            </a>
                                                        </td>
                                                        <td>
                                                            <span class="fw-normal" style="max-width:300px;">{{d.datastack_name}} </span>
                                                        </td>
                                                        <td><span class="fw-normal">{{u.first_name}} {{u.last_name}}</span></td>                        
                                                        <td><span class="fw-bold">{{u.name_of_organization}}</span></td>
                                                        <td><span class="fw-bold">{{u.type_of_organization}}</span></td>
                                                        
                                                        <td><span class="fw-bold" style="font-size:18px;"><a href="/dashboard/documents/{{r.identity_proof}}/view" target="_blank"><span class="fa-solid fa-file-pdf text-danger"></span></a></span></td>
                                                        <td><span class="fw-bold" style="font-size:18px;"><a href="/dashboard/documents/{{r.document_proof}}/view" target="_blank"><span class="fa-solid fa-file-pdf text-danger"></span></a></span></td>
                                                        <td><span class="fw-bold">{{r.status_of_request}}</span></td>                                                      
                                                        <td>
                                                            <div class="btn-group">
                                                                <button class="btn btn-link text-dark dropdown-toggle dropdown-toggle-split m-0 p-0" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                    <span class="icon icon-sm">
                                                                        <i class="fa-solid fa-ellipsis" style="font-size:25px;"></i>
                                                                    </span>
                                                                    <span class="visually-hidden">Take Action</span>
                                                                </button>
                                                                <div class="dropdown-menu py-0">
                                                                    
                                                                    <a class="dropdown-item rounded-top" data-bs-toggle="modal" data-bs-target="#modalViewRequest" data-request-id="{{r.request_id}}" data-datastack-name="{{d.datastack_name}}" data-datastack-url="/data/{{r.data_requested_id}}" data-first-name="{{u.first_name}}" data-last-name="{{u.last_name}}" data-name-of-organization="{{u.name_of_organization}}" data-type-of-organization= "{{u.type_of_organization}}" data-email="{{u.email}}" data-phone="{{u.phone}}" data-authority-document="/dashboard/documents/{{r.document_proof}}/view" data-identity-document="/dashboard/documents/{{r.identity_proof}}/view"  data-purpose="{{r.purpose}}" onclick="modalbox(this);"><span class="fa-solid fa-street-view"></span>View Details</a>
                                                                    <a class="dropdown-item text-success" href="#"><span class="fas fa-check me-2"></span> Approve</a>
                                                                    <a class="dropdown-item text-danger rounded-bottom" href="#"><span class="fa-solid fa-ban me-2"></span>Reject</a>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                    {% endfor %}
                                                    <!-- Item -->
                                                    
                                                                                  
                                                </tbody>
                                            </table>
                                            <div class="card-footer px-3 border-0 d-flex flex-column flex-lg-row align-items-center justify-content-between">
                                                <nav aria-label="Page navigation example">
                                                    <ul class="pagination mb-0">
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">Previous</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">1</a>
                                                        </li>
                                                        <li class="page-item active">
                                                            <a class="page-link" href="#">2</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">3</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">4</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">5</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">Next</a>
                                                        </li>
                                                    </ul>
                                                </nav>
                                                <div class="fw-normal small mt-4 mt-lg-0">Showing <b>5</b> out of <b>25</b> entries</div>
                                            </div>
                                        </div>
                                </div>
                                <hr>
                            </div>
                        </div>
                        
    
                        <!-- Tab 2 Content -->
                        <div class="tab-pane fade" id="tab-2" role="tabpanel" aria-labelledby="tab-2-tab">
                            <div class="row">
                                <div class="col-12">
                                    <div class="container">
                                        <p class="text-center">
                                        </p>
                                        <div class="row justify-content-center form-bg-image" data-background-lg="{{ config.ASSETS_ROOT }}/img/illustrations/login.jpg">
                                            <div class="col-12  align-items-center justify-content-center">
                                                <div class="bg-white shadow border-0 rounded border-light p-4 p-lg-5">
                                                    <div class="text-center text-md-center mb-4 mt-md-0">
                                                        <h1 class="mb-0 h3">
                                                            Edit Profile
                                                        </h1>
                                                        <br />
                                                        <p style="color:#2fb0bf;">
                                                            {% if msg %}
                                                                {{ msg | safe }}
                                                            {% else %}
                                                                Edit your details
                                                            {% endif %}                                     
                                                        </p> 
                                                    </div>
                                                    
                                                    {% if success %}
                        
                                                        <div class="d-grid">
                                                            <a href="{{ url_for('authentication_blueprint.login') }}" 
                                                               class="btn btn-gray-800">Sign IN</a>
                                                        </div>
                        
                                                    {% else %}
                        
                                                        
                                                        
                                                        <form  method="post" action="" class="mt-4 formx">
                                                            {{ form.hidden_tag() }}
                                                            <div class="row">
                                                                <div class="col-md-6 mb-1">
                                                                    <div>
                                                                        <label for="first_name">First Name</label>
                                                                        <input class="form-control" id="first_name" name="first_name" type="text" placeholder="" disabled value="{{current_user.first_name}}">
                                                                    </div>
                                                                    <ul ><li style="font-size:10px;">First name cannot be changed</li></ul>
                                                                </div>
                                                                <div class="col-md-6 mb-1">
                                                                    <div>
                                                                        <label for="last_name">Last Name</label>

                                                                        <input class="form-control" id="last_name" name="last_name" type="text" placeholder="Enter your last name" disabled value="{{current_user.last_name}}">
                                                                    </div>
                                                                    <ul ><li style="font-size:10px;">Last name can not be changed</li></ul>
                                                                </div>
                                                            </div>
                        
                                                            <div class="row align-items-center">
                                                                <div class="col-md-6 mb-1">
                                                                    <label for="date_of_birth">Date of Birth</label>
                                                                    <div class="input-group">
                                                                        <span class="input-group-text">
                                                                            <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                                                        </span>
                                                                        <input data-datepicker="" class="form-control datepicker-input" id="date_of_birth" name="date_of_birth" type="text" placeholder="dd/mm/yyyy" disabled value="{{current_user.date_of_birth}}">                                               
                                                                      </div>
                                                                </div>
                        
                                                                <div class="col-md-6 mb-1">
                                                                    <label for="type_of_organization">Type of Organization</label>
                                                                    <select class="form-select mb-0" aria-label="Type of organization" id="type_of_organization"  name="type_of_organization">
                                                                        <option selected>Choose...</option>
                                                                        <option value="Government">Government</option>
                                                                        <option value="Academic Institutes">Academic Institutes</option>
                                                                        <option value="R&D">R&D</option>
                                                                        <option value="Individuals">Individuals</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-6 mb-1">
                                                                    <div class="form-group">
                                                                        <label for="name_of_organization">Name of organization</label>
                                                                        <input class="form-control" id="name_of_organization" name="name_of_organization" type="text" placeholder="Name of organization" disabled value="{{current_user.name_of_organization}}"> 
                                                                    </div>
                                                                    <ul ><li style="font-size:10px;">Organization name must contain at least one letter and can include letters, numbers, spaces, and special characters.</li></ul>
                                                                </div>
                                                                <div class="col-md-6 mb-1">
                                                                    <label for="country">Country</label>
                                                                    <select class="form-select mb-0" id="country" name="country" aria-label="Choose country">
                                                                        <option selected>Choose...</option>
                                                                        <option value="India">India</option>
                                                
                                                                    </select>
                                                                </div>
                                                            </div>
                        
                                                            <div class="row">
                                                                <div class="col-md-6 mb-1">
                                                                    <div class="form-group">
                                                                        <label for="address">Address</label>
                                                                        
                                                                        <input class="form-control" id="address" name="address" type="text" placeholder="Enter your home address" disabled value="{{current_user.name_of_organization}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6 mb-1">
                                                                    <label for="gender">State</label>
                                                                    <select class="form-select mb-0" id="state" name="state" aria-label="Choose state">
                                                                        <option selected>Choose...</option>
                                                                        <option value="J&K">J&K</option>
                                                
                                                                    </select>
                                                                </div>
                                                            </div>
                        
                        
                                                            <div class="row">
                                                                <div class="col-md-6 mb-1">
                                                                    <div class="form-group">
                                                                        <label for="city_town">City/Town</label>
                                                                        
                                                                        <input class="form-control" id="city_town" name="city_town" type="text" placeholder="City/Town" disabled value="{{current_user.city_town}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6 mb-1">
                                                                    <div class="form-group">
                                                                        <label for="city">Pincode</label>
                                                                        {{ form.pincode(placeholder="Pincode", class="input form-control", type="text") }}
                                                                        <!-- <input class="form-control" id="pincode" name="pincode" type="text" placeholder="Pincode" required=""> -->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                        
                                                            <div class="row">
                                                                <div class="col-md-6 mb-1">
                                                                    <div class="form-group">
                                                                        <label for="email">Your Email</label>
                                                                        <div class="input-group">
                                                                            <span class="input-group-text" id="basic-addon1">
                                                                                <span class="fas fa-envelope"></span>
                                                                            </span>
                                                                            {{ form.email(placeholder="Email", class="input form-control", type="email") }}
                                                                        </div>  
                                                                    </div>
                                                                </div>
                        
                                                                <div class="col-md-6 mb-1">
                                                                    <label for="phone">Mobile number</label>
                                                                    <div class="input-group">
                                                                        <span class="input-group-text">
                                                                            +91
                                                                        </span>
                                                                        {{ form.phone(placeholder="(10 digits)", class="input form-control", type="text") }}
                                                                        <!-- <input class="form-control" id="phone" type="text" placeholder="(10 digits)" required="">                                                -->
                                                                      </div>
                                                                    <!-- <div class="form-group">
                                                                        <label for="phone">Mobile Number</label>
                                                                        <div class="row">
                                                                            
                                                                            <div class="col-2" style="width:20%;"><input class="form-control" id="ccode" type="text" placeholder="+91" disabled></div>
                                                                            <div class="col-10" style="width:80%;"><input class="form-control" id="phone" type="text" placeholder="(10 digits)" required=""></div>
                                                                        </div>
                                                                        
                                                                    </div> -->
                                                                </div>
                                                            </div>
                        
                                                            <div class="row">
                                                                <div class="col-md-6 mb-3">
                                                                    <label for="username">Set Username</label>
                                                                        <div class="input-group">
                                                                            <span class="input-group-text" id="basic-addon1">
                                                                                <span class="fas fa-user-circle"></span>
                                                                            </span>
                                                                            {{ form.username(placeholder="Username", class="form-control") }}
                                                                        </div> 
                                                                        <ul ><li style="font-size:10px;">Use at least 6 characters</li><li style="font-size:10px;">Use only letters and digits</li><li style="font-size:10px;">Do NOT use symbols or spaces</li></ul>
                                                                        
                                                                </div>
                                                                <div class="col-md-6 mb-3">
                                                                            <label for="password">Set Password</label>
                                                                        
                                                                            <div class="input-group">
                                                                                <span class="input-group-text" id="basic-addon2">
                                                                                    <span class="fas fa-unlock-alt"></span>
                                                                                </span>
                                                                                {{ form.password(placeholder="Password", class="form-control", type="password") }}
                                                                            </div> 
                                                                            <ul ><li style="font-size:10px;">Use at least 8 characters</li><li style="font-size:10px;">Use one uppercase, one numeric and one lowercase and one special character</li></ul>
                                                                </div>
                                                                <div class="mb-4 mt-4">
                                                                    <div class="form-check">
                                                                        <!-- <input class="form-check-input" type="checkbox" value="" id="remember"> -->
                                                                        <label class="form-check-label fw-normal mb-0 " for="remember">
                                                                            By submitting, I agree to the <a href="#" class="fw-bold"><a style="color:#0875bd;">Terms & Conditions</a> and <a style="color:#0875bd;">License of Usage</a>.
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                          
                                                            <div class="mt-3">
                                                                <div class="d-grid">
                                                                    <!--<button type="submit" name="edit-profile" class="btn btn-gray-800">Form</button>-->
                                                                    EDIT PROFILE IS CURRENTLY DISABLED
                                                                </div>
                                                                
                                                            </div>
                                                        </form>
                                                        <br />
                                                        
                                                    
                                                    {% endif %}
                        
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <hr>
                            </div>
                        </div>

                        <!--Tab 3-->
                        <div class="tab-pane fade" id="tab-3" role="tabpanel" aria-labelledby="tab-3-tab">
                            <div class="modal fade" id="modalViewDatastack" tabindex="-1" aria-labelledby="modalViewDatastackLabel" aria-hidden="true">
                                <div class="modal-dialog" style="max-width:80%;">
                                  <div class="modal-content">
                                    <div class="modal-header" style="background:#a1b3b0";>
                                      <h5 class="modal-title" id="exampleModalLabel">VIEW DATASTACK</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form method="post" enctype="multipart/form-data"  class="" style="padding-left:20px; padding-right:20px;">
                                            {{view_datastack_form.hidden_tag()}}
                                            <input type="hidden" id="delete_datastack_id" name="delete_datastack_id">
                                            <div class="row" style="text-align: left;">
                                                <div class="col-12  p-1">
                                                    <label id="labelx" for="first_name" class="labelx">
                                                        Datastack Name </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-database"></span>
                                                        </span>
                                                        
                                                        {{ view_datastack_form.view_datastack_name(placeholder="Datastack name", class="input form-control disabled", type="text", disabled=True) }}
                                                        <!-- <span class="input-group-text" id="basic-addon1">
                                                            <a href="" id="view_datastack_url" name="view_datastack_url" target="_blank"><span class="fa-solid fa-link"></span>&nbsp; Click to view datastack details</a>
                                                        </span> -->
                                                    </div>
                                                   </div>
                                            </div>
                                            <div class="row" style="text-align: left;" >   
                                                <div class="col-md-6 p-1">
                                                    <label id="labelx" for="last_name">
                                                        Datastack Basic Info 
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        {{ view_datastack_form.view_basic_info(placeholder="Basic Info", class="input form-control", type="text", disabled=True) }}                                           
                                                    </div>
                                                      
                                                </div>
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="last_name">
                                                        Datastack Detailed Info 
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        {{ view_datastack_form.view_detailed_info(placeholder="Detailed Info", class="input form-control", type="text", disabled=True) }}                                          
                                                    </div>
                                                   
                                                </div>
                                            </div>
                        
                                            <div class="row" style="text-align: left;">
                                                
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="name_of_organization">
                                                        Datastack Provider
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        {{ view_datastack_form.view_provider(placeholder="Provider (e.g., Mission YUVA)", class="input form-control", type="text", disabled=True) }}                                              
                                                    </div>
                                                   
                                                </div>
                                                
                        
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="type_of_organization">
                                                        Thumbnail
                                                    </label>
                                                    <div class="input-group">
                                                        <div class="input-group-text">
                                                            <a id="view_thumbnail" name="view_thumbnail" target="_blank">Click to view <span class="fa-solid fa-link text-danger"></span></a>
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                                
                                                
                                                
                                            </div>

                                            <div class="row" style="text-align: left;">
                                                
                                                <div class="col-12 p-1">
                                                    <label id="labelx" for="data_fields_label">
                                                        Keywords 
                                                    </label>
                                                    <div class="input-group">
                                                        <div id="view-keywords-container" class="keywords-container form-control">

                                                            {{ view_datastack_form.view_keywords(placeholder="Keywords (semicolon ; separated)", class="input", type="text", disabled=True) }} 
                                                        </div>
                                                    </div>
                                                </div>


                        
                                                 <div class="col-12 p-1">
                                                    <label id="labelx" for="data_fields_label">
                                                        Data Fields 

                                                    </label>
                                                    <div class="input-group">
                                                        <div id="view-datafields-container" class="datafields-container form-control">
                                                            {{ view_datastack_form.view_data_fields(placeholder="Data fields (semicolon ; separated)", class="input", type="text", disabled=True) }} 
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                
                                                
                                            </div>
                        
                                            
                                            <div class="row" style="text-align: left;">
                        
                        
                        
                                                <div class="col-4 p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="datastack_url_label">
                                                            Datastack URL  (ACTUAL DATA)
                                                        </label>
                                                        <div class="input-group">
                                                            <div class="input-group-text">
                                                                <a id="view_url" name="view_url" target="_blank">Click to view <span class="fa-solid fa-link text-danger"></span></a>
                                                            </div>
                                                        </div>
                                                       
                                                    </div>
                                                </div>

                                                <div class="col-4  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="datastack_url_label">
                                                            Sample Datastack URL (SAMPLE DATA) 
                                                        </label>
                                                        <div class="input-group">
                                                            <div class="input-group-text">
                                                                <a id="view_sample_data_url" name="view_sample_data_url" target="_blank">Click to view <span class="fa-solid fa-link text-danger"></span></a>
                                                            </div>
                                                        </div>
                                                       
                                                    </div>
                                                    
                                                </div>

                                                <div class="col-4  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="datastack_url_label">
                                                            URL for Metadata of Datastack
                                                        </label>
                
                                                        <div class="input-group">
                                                            <div class="input-group-text">
                                                                <a id="view_metadata_url" name="view_metadata_url" target="_blank">Click to view <span class="fa-solid fa-link text-danger"></span></a
                                                            ></div>
                                                            
                                                        </div>
                                                       
                                                    </div>
                                                    
                                                </div>

                                                
                        
                                        
                                                
                                            </div>

                                            <div class="row" style="text-align: left;">
                                                <div class="col-md-4  p-1">
                                                    <label id="labelx" for="phone">
                                                        Subscription Model  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            Paid/Free
                                                        </span>
                                                        {{ view_datastack_form.view_subscription_model(placeholder="Subscription Model (JSON format)", class="input form-control", type="text", disabled=True) }}                                             
                                                    </div>
                                                    
                                                </div>
                                                <div class="col-md-4  p-1">
                                                    <label id="labelx" for="phone">
                                                        Cost of Service
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            In Rupees
                                                        </span>
                                                        {{ view_datastack_form.view_cost_of_service(placeholder="Cost of Service", class="input form-control", type="text",disabled=True) }}                                               
                                                    </div>
                                                    
                                                </div>
                                                <div class="col-md-4  p-1">
                                                    <label id="labelx" for="phone">
                                                        Approval Required?
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            Yes/No
                                                        </span>
                                                        {{ view_datastack_form.view_approval_based_model(placeholder="Approval Based Model (JSON format)", class="input form-control", type="text", disabled=True) }}                                              
                                                    </div>
                                                    
                                                </div>

                                            </div>
                                            
                                            <div class="modal-footer">
                                                <button type="submit" id="delete_datastack" name="delete_datastack" class="btn btn-danger"> <span class="fas fa-check me-2" onclick=""></span>Delete</button>
                                            </div>
                                        </form>
                                    </div>
                                    
                                  </div>
                                  
                                
                                </div>
                                <br>
                                  <br>
                                  <br>
                                  <br>
                                  <br>
                                  <br>
                                  <br>
                            </div>
                            <div class="modal fade" id="modalAddDatastack" tabindex="-1" aria-labelledby="modalAddDatastackLabel" aria-hidden="true">
                                <div class="modal-dialog" style="max-width:80%;">
                                  <div class="modal-content">
                                    <div class="modal-header" style="background:#a1b3b0";>
                                      <h5 class="modal-title" id="exampleModalLabel">ADD DATASTACK</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form method="post" enctype="multipart/form-data"  class="" style="padding-left:20px; padding-right:20px;">
                                            {{datastack_form.hidden_tag()}}
                                            <div class="row" style="text-align: left;">
                                                <div class="col-12  p-1">
                                                    <label id="labelx" for="first_name" class="labelx">
                                                        Datastack Name  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-database"></span>
                                                        </span>
                                                        
                                                        {{ datastack_form.datastack_name(placeholder="Datastack name", class="input form-control", type="text") }}
                                                        <!-- <span class="input-group-text" id="basic-addon1">
                                                            <a href="" id="view_datastack_url" name="view_datastack_url" target="_blank"><span class="fa-solid fa-link"></span>&nbsp; Click to view datastack details</a>
                                                        </span> -->
                                                    </div>
                                                   </div>
                                            </div>
                                            <div class="row" style="text-align: left;" >   
                                                <div class="col-md-6 p-1">
                                                    <label id="labelx" for="last_name">
                                                        Datastack Basic Info  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        {{ datastack_form.basic_info(placeholder="Basic Info", class="input form-control", type="text") }}                                           
                                                    </div>
                                                      
                                                </div>
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="last_name">
                                                        Datastack Detailed Info  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text" id="basic-addon1">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        {{ datastack_form.detailed_info(placeholder="Detailed Info", class="input form-control", type="text") }}                                          
                                                    </div>
                                                   
                                                </div>
                                            </div>
                        
                                            <div class="row" style="text-align: left;">
                                                
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="name_of_organization">
                                                        Datastack Provider <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        {{ datastack_form.provider(placeholder="Provider (e.g., Mission YUVA)", class="input form-control", type="text") }}                                              
                                                    </div>
                                                   
                                                </div>
                                                
                        
                                                <div class="col-md-6  p-1">
                                                    <label id="labelx" for="type_of_organization">
                                                        Thumbnail <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <!-- IMG SRC HERE-->
                                                        {{ datastack_form.thumbnail(class="form-control") }}                                               
                                                    </div>
                                                    
                                                </div>
                                                
                                                
                                                
                                            </div>

                                            <div class="row" style="text-align: left;">
                                                
                                                <div class="col-12 p-1">
                                                    <label id="labelx" for="data_fields_label">
                                                        Keywords  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <div id="keywords-container" class="keywords-container form-control">
                                                            {{ datastack_form.keywords_shower(placeholder="Keywords (semicolon ; separated)", class="input", type="text", id="keywords_shower") }} 
                                                        </div>
                                                    </div>
                                                </div>


                                                <!-- 
                                                 <div class="col-md-6 p-1">
                                                    <label id="labelx" for="data_fields_label">Keywords</label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            <span class="fas fa-file-signature"></span>
                                                        </span>
                                                        <div id="keywords-container" class="keywords-container">
                                                            {{ datastack_form.keywords(placeholder="Keywords (comma-separated)", class="input", type="text") }} 
                                                        </div>
                                                    </div>
                                                </div>
                                                 -->
                        
                                                 <div class="col-12 p-1">
                                                    <label id="labelx" for="data_fields_label">
                                                        Data Fields  <span style="font-weight: normal; font-size:14px;"> (The list of columns of the datastack separated by ; semicolon)</span> <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>

                                                    </label>
                                                    <div class="input-group">
                                                        <div id="datafields-container" class="datafields-container form-control">
                                                            {{ datastack_form.data_fields_shower(placeholder="Data fields (semicolon ; separated)", class="input", type="text",  id="data_fields_shower") }} 
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                
                                                
                                                
                                                
                                            </div>
                        
                                            
                                            <div class="row" style="text-align: left;">
                        
                        
                        
                                                <div class="col-12  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="datastack_url_label">
                                                            Datastack URL  (ACTUAL DATA) <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                        </label>
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                External Link/ GDrive 
                                                            </span>
                                                            {{ datastack_form.url(placeholder="Example https://drive.google.com/", class="input form-control", type="text") }}
                                                            
                                                        </div>
                                                       
                                                    </div>
                                                </div>

                                                <div class="col-12  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="datastack_url_label">
                                                            Sample Datastack URL (SAMPLE DATA)  <span style="font-weight: normal; color:rgb(0, 122, 86); font-size:14px;"> (Optional) </span>
                                                        </label>
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                External Link/ GDrive 
                                                            </span>
                                                            {{ datastack_form.sample_data_url(placeholder="Example https://drive.google.com/", class="input form-control", type="text") }}
                                                            
                                                        </div>
                                                       
                                                    </div>
                                                    
                                                </div>

                                                <div class="col-12  p-1">
                                                    <div class="form-group">
                                                        <label id="labelx" for="datastack_url_label">
                                                            URL for Metadata of Datastack (DOCUMENT FOR DESCRIPTION OF DATAFIELDS) <span style="font-weight: normal; color:rgb(0, 122, 86); font-size:14px;"> (Optional) </span>
                                                        </label>
                
                                                        <div class="input-group">
                                                            <span class="input-group-text">
                                                                External Link/ GDrive 
                                                            </span>
                                                            {{ datastack_form.metadata_url(placeholder="Example https://drive.google.com/", class="input form-control", type="text") }}
                                                            
                                                        </div>
                                                       
                                                    </div>
                                                    
                                                </div>

                                                
                        
                                        
                                                
                                            </div>

                                            <div class="row" style="text-align: left;">
                                                <div class="col-md-4  p-1">
                                                    <label id="labelx" for="phone">
                                                        Subscription Model  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            Paid/Free
                                                        </span>
                                                        {{ datastack_form.subscription_model(placeholder="Subscription Model (JSON format)", class="input form-control", type="text") }}                                             
                                                    </div>
                                                    
                                                </div>
                                                <div class="col-md-4  p-1">
                                                    <label id="labelx" for="phone">
                                                        Cost of Service <span style="font-weight: normal; font-size:14px;"> (Fill if subscription model is Paid)</span> <span style="font-weight: normal; color:rgb(0, 122, 86); font-size:14px;"> (Optional) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            In Rupees
                                                        </span>
                                                        {{ datastack_form.cost_of_service(placeholder="Cost of Service", class="input form-control", type="text") }}                                               
                                                    </div>
                                                    
                                                </div>
                                                <div class="col-md-4  p-1">
                                                    <label id="labelx" for="phone">
                                                        Approval Required?  <span style="font-weight: normal; color:rgb(121, 1, 1); font-size:14px;"> (* Required) </span>
                                                    </label>
                                                    <div class="input-group">
                                                        <span class="input-group-text">
                                                            Yes/No
                                                        </span>
                                                        {{ datastack_form.approval_based_model(placeholder="Approval Based Model (JSON format)", class="input form-control", type="text") }}                                              
                                                    </div>
                                                    
                                                </div>

                                            </div>
                                            
                                            <div class="modal-footer">
                                               <button type="submit" id="add_datastack" name="add_datastack" class="btn btn-success"> <span class="fas fa-check me-2" onclick="parse_keywords();"></span>Submit</button>
                                               
                                            </div>
                                        </form>
                                    </div>
                                    
                                  </div>
                                  
                                
                                </div>
                                <br>
                                  <br>
                                  <br>
                                  <br>
                                  <br>
                                  <br>
                                  <br>
                            </div>
     
                            <div class="row">
                                
                                <div class="col-12" style="padding:20px;">
                                       
                                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4">
                                            
                                            
                                            <div class="d-block mb-4 mb-md-0">
                                                
                                                <a data-bs-toggle="modal" data-bs-target="#modalAddDatastack"> <button class="btn btn-success" style="color:#fff; font-weight: bold;">Add Datastack</button></a>
                                            </div>
                                            <!-- <div class="btn-toolbar mb-2 mb-md-0">
                                                <a href="#" class="btn btn-sm btn-gray-800 d-inline-flex align-items-center">
                                                    <svg class="icon icon-xs me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                                                    New Plan
                                                </a>
                                                <div class="btn-group ms-2 ms-lg-3">
                                                    <button type="button" class="btn btn-sm btn-outline-gray-600">Share</button>
                                                    <button type="button" class="btn btn-sm btn-outline-gray-600">Export</button>
                                                </div>
                                            </div> -->
                                        </div>
                                        
                                        <div class="table-settings mb-4">
                                            <div class="row align-items-center justify-content-between">
                                                <!-- <div class="col col-md-6 col-lg-3 col-xl-4">
                                                    <div class="input-group me-2 me-lg-3 fmxw-400">
                                                        <span class="input-group-text">
                                                            <svg class="icon icon-xs" x-description="Heroicon name: solid/search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                                            </svg>
                                                        </span>
                                                        <input type="text" class="form-control" placeholder="Search orders">
                                                    </div>
                                                </div> -->
                                                <!-- <div class="col-4 col-md-2 col-xl-1 ps-md-0 text-end">
                                                    <div class="dropdown">
                                                        <button class="btn btn-link text-dark dropdown-toggle dropdown-toggle-split m-0 p-1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path></svg>
                                                            <span class="visually-hidden">Toggle Dropdown</span>
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-xs dropdown-menu-end pb-0" data-popper-placement="bottom-end" style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate3d(1132px, 497px, 0px);">
                                                            <span class="small ps-3 fw-bold text-dark">Show</span>
                                                            <a class="dropdown-item d-flex align-items-center fw-bold" href="#">10 <svg class="icon icon-xxs ms-auto" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></a>
                                                            <a class="dropdown-item fw-bold" href="#">20</a>
                                                            <a class="dropdown-item fw-bold rounded-bottom" href="#">30</a>
                                                        </div>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                        
                                        <div class="cardx card-body border-0 shadow table-wrapper table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th class="border-gray-200">Datastack ID</th>
                                                        <th class="border-gray-200">Datastack Name</th>						
                                                        <th class="border-gray-200">Basic Info</th>
                                                        <th class="border-gray-200">Provider</th>
                                                        <th class="border-gray-200">Access URL</th>
                                                        <th class="border-gray-200">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Item -->

                                                    {% for ex_ds in existing_datastacks %}
                                                    <tr>
                                                        <td>
                                                            <a href="#" class="fw-bold">
                                                                {{ex_ds.id}}
                                                            </a>
                                                        </td>
                                                        <td>
                                                            <span class="fw-normal" style="max-width:300px;">{{ex_ds.datastack_name}} </span>
                                                        </td>
                                                        <td><span class="fw-normal">{{ex_ds.basic_info}}</span></td>                        
                                                        <td><span class="fw-bold">{{ex_ds.provider}}</span></td>
                                                        <td><span class="fw-bold" style="font-size:18px;"><a href="{{ex_ds.url}}" target="_blank"><span class="fa-solid fa-link text-danger"></span></a></span></td>                                     
                                                        <td>
                                                            <div class="btn-group">
                                                                <button class="btn btn-link text-dark dropdown-toggle dropdown-toggle-split m-0 p-0" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                    <span class="icon icon-sm">
                                                                        <i class="fa-solid fa-ellipsis" style="font-size:25px;"></i>
                                                                    </span>
                                                                    <span class="visually-hidden">Take Action</span>
                                                                </button>
                                                                <div class="dropdown-menu py-0">
                                                                    <a class="dropdown-item rounded-top" data-bs-toggle="modal" data-bs-target="#modalViewDatastack"  onclick="modalViewDatastack(this);" data-ds-id="{{ex_ds.id}}" data-ds-name="{{ex_ds.datastack_name}}" data-ds-api-url="{{ex_ds.api_url}}" data-ds-basic-info="{{ex_ds.basic_info}}" data-ds-detailed-info="{{ex_ds.detailed_info}}" data-ds-provider="{{ex_ds.provider}}" data-ds-thumbnail="{{ex_ds.thumbnail}}" data-ds-url="{{ex_ds.url}}" data-ds-metadata-url="{{ex_ds.metadata_url}}" data-ds-version="{{ex_ds.version}}" data-ds-date-published="{{ex_ds.date_published}}" data-ds-last-updated="{{ex_ds.last_updated}}" data-ds-sample-data-url="{{ex_ds.sample_data_url}}"  data-ds-sample-data-url="{{ex_ds.sample_data_url}}" data-ds-license-url="{{ex_ds.license_url}}" data-ds-cos="{{ex_ds.cost_of_service}}" data-ds-keywords="{{ex_ds.keywords}}" data-ds-data-fields="{{ex_ds.data_fields}}" data-ds-subscription-model="{{ex_ds.subscription_model}}" data-ds-approval-based-model="{{ex_ds.approval_based_model}}" ><span class="fa-solid fa-street-view"></span>View Datastack</a>
                                                                    <a class="dropdown-item rounded-top" data-bs-toggle="modal" data-bs-target="#modalEditDatastack"  onclick="modalEditDatastack(this);" data-ds-id="{{ex_ds.id}}" data-ds-name="{{ex_ds.datastack_name}}" data-ds-api-url="{{ex_ds.api_url}}" data-ds-basic-info="{{ex_ds.basic_info}}" data-ds-detailed-info="{{ex_ds.detailed_info}}" data-ds-provider="{{ex_ds.provider}}" data-ds-thumbnail="{{ex_ds.thumbnail}}" data-ds-url="{{ex_ds.url}}" data-ds-metadata-url="{{ex_ds.metadata_url}}" data-ds-version="{{ex_ds.version}}" data-ds-date-published="{{ex_ds.date_published}}" data-ds-last-updated="{{ex_ds.last_updated}}" data-ds-sample-data-url="{{ex_ds.sample_data_url}}"  data-ds-sample-data-url="{{ex_ds.sample_data_url}}" data-ds-license-url="{{ex_ds.license_url}}" data-ds-cos="{{ex_ds.cost_of_service}}" data-ds-keywords="{{ex_ds.keywords}}" data-ds-data-fields="{{ex_ds.data_fields}}" data-ds-subscription-model="{{ex_ds.subscription_model}}" data-ds-approval-based-model="{{ex_ds.approval_based_model}}" ><span class="fa-solid fa-street-view"></span>Edit Datastack</a>
                                                                    <!-- <a class="dropdown-item rounded-top" data-bs-toggle="modal" data-bs-target="#modalDeleteDatastack"  onclick="modalDeleteDatastack(this);" data-ds-id="{{ex_ds.id}}" data-ds-name="{{ex_ds.datastack_name}}" data-ds-api-url="{{ex_ds.api_url}}" data-ds-basic-info="{{ex_ds.basic_info}}" data-ds-detailed-info="{{ex_ds.detailed_info}}" data-ds-provider="{{ex_ds.provider}}" data-ds-thumbnail="{{ex_ds.thumbnail}}" data-ds-url="{{ex_ds.url}}" data-ds-metadata-url="{{ex_ds.metadata_url}}" data-ds-version="{{ex_ds.version}}" data-ds-date-published="{{ex_ds.date_published}}" data-ds-last-updated="{{ex_ds.last_updated}}" data-ds-sample-data-url="{{ex_ds.sample_data_url}}"  data-ds-sample-data-url="{{ex_ds.sample_data_url}}" data-ds-license-url="{{ex_ds.license_url}}" data-ds-cos="{{ex_ds.cost_of_service}}" data-ds-keywords="{{ex_ds.keywords}}" data-ds-data-fields="{{ex_ds.data_fields}}" data-ds-subscription-model="{{ex_ds.subscription_model}}" data-ds-approval-based-model="{{ex_ds.approval_based_model}}" ><span class="fa-solid fa-street-view"></span>Delete Datastack</a>
                                                                    -->
                                                                    
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                    {% endfor %}
                                                    <!-- Item -->
                                                    
                                                                                  
                                                </tbody>
                                            </table>
                                            <div class="card-footer px-3 border-0 d-flex flex-column flex-lg-row align-items-center justify-content-between">
                                                <nav aria-label="Page navigation example">
                                                    <ul class="pagination mb-0">
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">Previous</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">1</a>
                                                        </li>
                                                        <li class="page-item active">
                                                            <a class="page-link" href="#">2</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">3</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">4</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">5</a>
                                                        </li>
                                                        <li class="page-item">
                                                            <a class="page-link" href="#">Next</a>
                                                        </li>
                                                    </ul>
                                                </nav>
                                                <div class="fw-normal small mt-4 mt-lg-0">Showing <b>5</b> out of <b>25</b> entries</div>
                                            </div>
                                        </div>
                                </div>
                                <hr>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        

    </div>
    
    <script>


function parse_keywords()
{

}
        function modalbox(x)
        {
            let request_id = x.getAttribute("data-request-id");
            let datastack_name = x.getAttribute("data-datastack-name");
            let datastack_url = x.getAttribute("data-datastack-url");  
            let first_name = x.getAttribute("data-first-name"); 
            let last_name = x.getAttribute("data-last-name"); 
            let name_of_organization = x.getAttribute("data-name-of-organization"); 
            let type_of_organization = x.getAttribute("data-type-of-organization"); 
            let email = x.getAttribute("data-email"); 
            let phone = x.getAttribute("data-phone"); 
            let authority_document = x.getAttribute("data-authority-document"); 
            let identity_document = x.getAttribute("data-identity-document"); 

            let purpose = x.getAttribute("data-purpose"); 
            


            document.getElementById('req_request_id').value=request_id;
            document.getElementById('req_datastack_name').value=datastack_name;
            document.getElementById('req_datastack_url').href=datastack_url;
            document.getElementById('req_first_name').value=first_name;
            document.getElementById('req_last_name').value=last_name;
            document.getElementById('req_name_of_organization').value=name_of_organization;
            document.getElementById('req_type_of_organization').value=type_of_organization;
            document.getElementById('req_email').value=email;
            document.getElementById('req_phone').value=phone;
            document.getElementById('req_authority_document').href=authority_document;
            document.getElementById('req_identity_document').href=identity_document;
            
            document.getElementById('req_purpose').innerText=purpose;
            
            

            
        }

    function modalViewDatastack(element) {
            // Extract attributes from the clicked element
            let dsId = element.getAttribute("data-ds-id");
            let dsName = element.getAttribute("data-ds-name");
            let dsApiUrl = element.getAttribute("data-ds-api-url");
            let dsBasicInfo = element.getAttribute("data-ds-basic-info");
            let dsDetailedInfo = element.getAttribute("data-ds-detailed-info");
            let dsProvider = element.getAttribute("data-ds-provider");
            let dsThumbnail = element.getAttribute("data-ds-thumbnail");
            let dsUrl = element.getAttribute("data-ds-url");
            let dsMetadataUrl = element.getAttribute("data-ds-metadata-url");
            let dsVersion = element.getAttribute("data-ds-version");
            let dsDatePublished = element.getAttribute("data-ds-date-published");
            let dsLastUpdated = element.getAttribute("data-ds-last-updated");
            let dsSampleDataUrl = element.getAttribute("data-ds-sample-data-url");
            let dsLicenseUrl = element.getAttribute("data-ds-license-url");
            let dsCos = element.getAttribute("data-ds-cos");
            let dsKeywords = element.getAttribute("data-ds-keywords");
            let dsDataFields = element.getAttribute("data-ds-data-fields");
            let dsSubscriptionModel = element.getAttribute("data-ds-subscription-model");
            let dsApprovalBasedModel = element.getAttribute("data-ds-approval-based-model");

            // Populate modal input fields
            //document.getElementById('modal_ds_id').value = dsId;
            document.getElementById('view_datastack_name').value = dsName;
            //document.getElementById('modal_ds_api_url').value = dsApiUrl;
            document.getElementById('view_basic_info').value = dsBasicInfo;
            document.getElementById('view_detailed_info').value = dsDetailedInfo;
            document.getElementById('view_provider').value = dsProvider;
            
            document.getElementById('view_thumbnail').href = dsThumbnail;
            document.getElementById('view_keywords').value = dsKeywords;
            document.getElementById('view_data_fields').value = dsDataFields;
            //document.getElementById('view_date_published').value = formatDate(dsDatePublished);
            //document.getElementById('view_datastack_last_updated').value = dsLastUpdated;
            document.getElementById('view_url').href = dsUrl;

            if (dsMetadataUrl != "")
            {
                document.getElementById('view_metadata_url').href = dsMetadataUrl;
            }
            else{
                document.getElementById('view_metadata_url').innerHTML = 'Not available';
            }

            if (dsSampleDataUrl != "")
            {
                document.getElementById('view_sample_data_url').href = dsSampleDataUrl;
            }
            else{
                document.getElementById('view_sample_data_url').innerHTML = 'Not available';
            }
            
            //document.getElementById('view_license_url').value = dsLicenseUrl;
            document.getElementById('view_cost_of_service').value = dsCos;
            document.getElementById('view_subscription_model').value = dsSubscriptionModel;
            document.getElementById('view_approval_based_model').value = dsApprovalBasedModel;
            document.getElementById('view_thumbnail').value = dsThumbnail;
            document.getElementById('delete_datastack_id').value = dsId;

        }

        
    function modalEditDatastack(element) {
            // Extract attributes from the clicked element
            let dsId = element.getAttribute("data-ds-id");
            let dsName = element.getAttribute("data-ds-name");
            let dsApiUrl = element.getAttribute("data-ds-api-url");
            let dsBasicInfo = element.getAttribute("data-ds-basic-info");
            let dsDetailedInfo = element.getAttribute("data-ds-detailed-info");
            let dsProvider = element.getAttribute("data-ds-provider");
            let dsThumbnail = element.getAttribute("data-ds-thumbnail");
            let dsUrl = element.getAttribute("data-ds-url");
            let dsMetadataUrl = element.getAttribute("data-ds-metadata-url");
            let dsVersion = element.getAttribute("data-ds-version");
            let dsDatePublished = element.getAttribute("data-ds-date-published");
            let dsLastUpdated = element.getAttribute("data-ds-last-updated");
            let dsSampleDataUrl = element.getAttribute("data-ds-sample-data-url");
            let dsLicenseUrl = element.getAttribute("data-ds-license-url");
            let dsCos = element.getAttribute("data-ds-cos");
            let dsKeywords = element.getAttribute("data-ds-keywords");
            let dsDataFields = element.getAttribute("data-ds-data-fields");
            let dsSubscriptionModel = element.getAttribute("data-ds-subscription-model");
            let dsApprovalBasedModel = element.getAttribute("data-ds-approval-based-model");

            // Populate modal input fields
            //document.getElementById('modal_ds_id').value = dsId;
            document.getElementById('view_datastack_name').value = dsName;
            //document.getElementById('modal_ds_api_url').value = dsApiUrl;
            document.getElementById('view_basic_info').value = dsBasicInfo;
            document.getElementById('view_detailed_info').value = dsDetailedInfo;
            document.getElementById('view_provider').value = dsProvider;
            
            document.getElementById('view_thumbnail').href = dsThumbnail;
            document.getElementById('view_keywords').value = dsKeywords;
            document.getElementById('view_data_fields').value = dsDataFields;
            //document.getElementById('view_date_published').value = formatDate(dsDatePublished);
            //document.getElementById('view_datastack_last_updated').value = dsLastUpdated;
            document.getElementById('view_url').href = dsUrl;

            if (dsMetadataUrl != "")
            {
                document.getElementById('view_metadata_url').href = dsMetadataUrl;
            }
            else{
                document.getElementById('view_metadata_url').innerHTML = 'Not available';
            }

            if (dsSampleDataUrl != "")
            {
                document.getElementById('view_sample_data_url').href = dsSampleDataUrl;
            }
            else{
                document.getElementById('view_sample_data_url').innerHTML = 'Not available';
            }
            
            //document.getElementById('view_license_url').value = dsLicenseUrl;
            document.getElementById('view_cost_of_service').value = dsCos;
            document.getElementById('view_subscription_model').value = dsSubscriptionModel;
            document.getElementById('view_approval_based_model').value = dsApprovalBasedModel;
            document.getElementById('view_thumbnail').value = dsThumbnail;
            document.getElementById('delete_datastack_id').value = dsId;

        }


        function formatDate(dateString) {
            let dateObj = new Date(dateString+'Z');  // Convert string to Date object
            
            let options = { year: 'numeric', month: 'long', day: 'numeric' };
            let formattedDate = dateObj.toLocaleDateString(undefined, options);

            let timeOptions = { hour: '2-digit', minute: '2-digit', hour12: true };
            let formattedTime = dateObj.toLocaleTimeString(undefined, timeOptions);

            return `${formattedDate} at ${formattedTime}`;
        }





        
        // Find the span and update its content dynamically
    document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll("[data-date]").forEach(el => {  
            let rawDate = el.getAttribute("data-date");  
            if (rawDate !== "") {
                //el.innerText = formatDate(rawDate) + " (UTC)";
                el.innerText = formatDate(rawDate);
            }
        });
    setupTaggingSystem("keywords-container", "keywords_shower", "keywords");
    setupTaggingSystem("datafields-container", "data_fields_shower", "data_fields");

    function setupTaggingSystem(containerId, inputId, hiddenInputName) {
        const tagsContainer = document.getElementById(containerId);
        const tagsInput = document.getElementById(inputId);
        
        if (!tagsContainer || !tagsInput) {
            console.error(`Element(s) missing: #${containerId} or #${inputId}`);
            return;
        }

        const hiddenInput = document.createElement("input"); // Hidden input field
        hiddenInput.type = "hidden";
        hiddenInput.name = hiddenInputName;
        hiddenInput.id = hiddenInputName;
        tagsContainer.appendChild(hiddenInput);

        // Handle Enter or Semicolon
        tagsInput.addEventListener("keydown", function (event) {
            if (event.key === "Enter" || event.key === ";") {
                event.preventDefault();
                processTags(tagsInput.value, tagsContainer, tagsInput, hiddenInput);
            }
        });

        // Handle Paste (Command + V or Ctrl + V)
        tagsInput.addEventListener("paste", function (event) {
            event.preventDefault();
            let pastedText = (event.clipboardData || window.clipboardData).getData("text");
            processTags(pastedText, tagsContainer, tagsInput, hiddenInput);
        });
    }

    function processTags(inputText, tagsContainerX, tagsInputX, hiddenInputX) {
        const tagValues = inputText.split(";").map(tag => tag.trim()).filter(tag => tag);
        tagValues.forEach(tagValue => {
            if (!isTagAlreadyAdded(tagValue, tagsContainerX)) {
                addTag(tagValue, tagsContainerX, hiddenInputX);
            }
        });
        tagsInputX.value = ""; // Clear input field
        updateHiddenInput(tagsContainerX, hiddenInputX);
    }

    function addTag(tagValueX, tagsContainerX, hiddenInputX) {
    const tagElementX = document.createElement("div");
    tagElementX.classList.add("tag");
    tagElementX.innerHTML = `<span>${tagValueX}</span> <i class="fa-solid fa-xmark remove-tag"></i>`;

    // Insert the tag before the input field inside the container
    const inputField = tagsContainerX.querySelector("textarea");
    tagsContainerX.insertBefore(tagElementX, inputField);

    // Add event listener to remove tag
    tagElementX.querySelector(".remove-tag").addEventListener("click", function () {
        tagsContainerX.removeChild(tagElementX);
        updateHiddenInput(tagsContainerX, hiddenInputX);
    });

    updateHiddenInput(tagsContainerX, hiddenInputX);
}


    function isTagAlreadyAdded(tagValueX, tagsContainerX) {
        return [...tagsContainerX.getElementsByClassName("tag")].some(tag => tag.firstChild.textContent.trim() === tagValueX);
    }

    function updateHiddenInput(tagsContainerX, hiddenInputX) {
        const tagValues = [...tagsContainerX.getElementsByClassName("tag")].map(tag => tag.firstChild.textContent.trim());
        hiddenInputX.value = tagValues.join(";");
    }
        });





    </script>
    
    
    <!-- Search and Filter -->

    
    <!-- Data List (Placeholder) -->
    
    
    <!-- Opportunities Section -->
    <!-- <div class="container mt-5" id="opportunities">
        <h2 class="text-center">Entrepreneurship Opportunities</h2>
        <p class="text-center">Find government-supported schemes and private opportunities.</p>
    </div> -->
    
    <!-- Footer -->
{% endblock content %}  
    
   